<mxGraphModel dx="1676" dy="2048" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1600" math="0" shadow="0">
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />
    <mxCell id="aws-cloud" parent="1" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud_alt;strokeColor=#232F3E;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#232F3E;dashed=0;" value="AWS Cloud" vertex="1">
      <mxGeometry height="1100" width="1400" x="40" y="40" as="geometry" />
    </mxCell>
    <mxCell id="region" parent="aws-cloud" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_region;strokeColor=#147EBA;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=1;" value="Region: ap-northeast-2 (Seoul)" vertex="1">
      <mxGeometry height="1030" width="1360" x="20" y="40" as="geometry" />
    </mxCell>
    <mxCell id="vpc" parent="region" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#248814;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" value="VPC: nanogrid-vpc (10.0.0.0/16)" vertex="1">
      <mxGeometry height="950" width="880" x="20" y="50" as="geometry" />
    </mxCell>
    <mxCell id="az-a" parent="vpc" style="fillColor=none;strokeColor=#147EBA;dashed=1;verticalAlign=top;fontStyle=1;fontColor=#147EBA;whiteSpace=wrap;html=1;" value="Availability Zone: ap-northeast-2a" vertex="1">
      <mxGeometry height="870" width="420" x="20" y="50" as="geometry" />
    </mxCell>
    <mxCell id="public-subnet-a" parent="vpc" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" value="Public Subnet (10.0.1.0/24)" vertex="1">
      <mxGeometry height="180" width="380" x="40" y="90" as="geometry" />
    </mxCell>
    <mxCell id="controller-ec2" parent="public-subnet-a" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" value="Controller EC2 (Express.js) 10.0.1.84" vertex="1">
      <mxGeometry height="60" width="60" x="50" y="60" as="geometry" />
    </mxCell>
    <mxCell id="nat" parent="public-subnet-a" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" value="NAT Gateway" vertex="1">
      <mxGeometry height="50" width="50" x="280" y="65" as="geometry" />
    </mxCell>
    <mxCell id="private-data-subnet" parent="vpc" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#147EBA;fillColor=#E6F2F8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" value="Private-Data Subnet (10.0.20.0/24)" vertex="1">
      <mxGeometry height="550" width="380" x="40" y="290" as="geometry" />
    </mxCell>
    <mxCell id="asg" parent="private-data-subnet" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.groupCenter;grIcon=mxgraph.aws4.group_auto_scaling_group;grStroke=1;strokeColor=#D86613;fillColor=none;verticalAlign=top;align=center;fontColor=#D86613;dashed=1;spacingTop=25;" value="Auto Scaling Group - Worker EC2" vertex="1">
      <mxGeometry height="150" width="340" x="20" y="40" as="geometry" />
    </mxCell>
    <mxCell id="ec2-1" parent="asg" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" value="Worker (Docker)" vertex="1">
      <mxGeometry height="50" width="50" x="30" y="50" as="geometry" />
    </mxCell>
    <mxCell id="ec2-2" parent="asg" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" value="Worker (Docker)" vertex="1">
      <mxGeometry height="50" width="50" x="100" y="50" as="geometry" />
    </mxCell>
    <mxCell id="ec2-n" parent="asg" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;opacity=50;" value="..." vertex="1">
      <mxGeometry height="50" width="50" x="170" y="50" as="geometry" />
    </mxCell>
    <mxCell id="output-binding" parent="asg" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=8;fontStyle=1;" value="Output Binding /tmp/output to S3" vertex="1">
      <mxGeometry height="30" width="90" x="240" y="60" as="geometry" />
    </mxCell>
    <mxCell id="redis" parent="private-data-subnet" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3334B9;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.elasticache_for_redis;" value="ElastiCache Redis (Pub/Sub)" vertex="1">
      <mxGeometry height="55" width="55" x="40" y="220" as="geometry" />
    </mxCell>
    <mxCell id="ai-node" parent="private-data-subnet" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#7AA116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.ec2_instance;" value="AI Node EC2 Ollama LLM 10.0.20.100:11434" vertex="1">
      <mxGeometry height="60" width="60" x="160" y="380" as="geometry" />
    </mxCell>
    <mxCell id="ai-docker" parent="private-data-subnet" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=8;" value="Ollama Docker Llama3/Phi-3" vertex="1">
      <mxGeometry height="40" width="100" x="250" y="390" as="geometry" />
    </mxCell>
    <mxCell id="az-c" parent="vpc" style="fillColor=none;strokeColor=#147EBA;dashed=1;verticalAlign=top;fontStyle=1;fontColor=#147EBA;whiteSpace=wrap;html=1;" value="Availability Zone: ap-northeast-2c" vertex="1">
      <mxGeometry height="180" width="400" x="460" y="50" as="geometry" />
    </mxCell>
    <mxCell id="public-subnet-c" parent="vpc" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#248814;fillColor=#E9F3E6;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" value="Public Subnet 2 (10.0.2.0/24) - ALB Multi-AZ" vertex="1">
      <mxGeometry height="120" width="360" x="480" y="90" as="geometry" />
    </mxCell>
    <mxCell id="alb-note" parent="public-subnet-c" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=9;" value="ALB Multi-AZ requirement (No EC2)" vertex="1">
      <mxGeometry height="40" width="150" x="100" y="45" as="geometry" />
    </mxCell>
    <mxCell id="alb" parent="vpc" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.application_load_balancer;" value="ALB nanogrid-alb (Multi-AZ)" vertex="1">
      <mxGeometry height="60" width="60" x="410" y="300" as="geometry" />
    </mxCell>
    <mxCell id="alb-to-az-a" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4D27AA;strokeWidth=2;dashed=1;" edge="1" source="alb" target="public-subnet-a">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="alb-to-az-c" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4D27AA;strokeWidth=2;dashed=1;" edge="1" source="alb" target="public-subnet-c">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="controller-role" parent="vpc" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontStyle=0;align=left;spacingLeft=10;" value="Controller Role (Lambda replaced): /upload S3/DynamoDB, /run SQS+Redis" vertex="1">
      <mxGeometry height="60" width="180" x="500" y="400" as="geometry" />
    </mxCell>
    <mxCell id="conn-alb-controller" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#ED7100;strokeWidth=2;" edge="1" source="alb" target="controller-ec2">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-controller-redis" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3334B9;strokeWidth=2;" edge="1" source="controller-ec2" target="redis">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-worker-redis" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3334B9;strokeWidth=2;" edge="1" source="ec2-1" target="redis">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-worker-ai" parent="vpc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#7AA116;strokeWidth=2;" edge="1" source="ec2-1" target="ai-node">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>   
 <mxCell id="regional-services" parent="region" style="fillColor=#F5F5F5;strokeColor=#666666;dashed=1;verticalAlign=top;fontStyle=1;fontColor=#333333;whiteSpace=wrap;html=1;rounded=1;" value="Regional Services" vertex="1">
      <mxGeometry height="550" width="400" x="940" y="100" as="geometry" />
    </mxCell>
    <mxCell id="sqs" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.queue;" value="SQS nanogrid-task-queue" vertex="1">
      <mxGeometry height="55" width="55" x="50" y="60" as="geometry" />
    </mxCell>
    <mxCell id="dynamodb" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3334B9;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.dynamodb;" value="DynamoDB NanoGridFunctions" vertex="1">
      <mxGeometry height="55" width="55" x="170" y="60" as="geometry" />
    </mxCell>
    <mxCell id="cloudwatch" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.cloudwatch;" value="CloudWatch Auto Scaling" vertex="1">
      <mxGeometry height="55" width="55" x="290" y="60" as="geometry" />
    </mxCell>
    <mxCell id="s3-code" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" value="S3 nanogrid-code-bucket" vertex="1">
      <mxGeometry height="55" width="55" x="50" y="180" as="geometry" />
    </mxCell>
    <mxCell id="s3-userdata" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket;" value="S3 nanogrid-user-data" vertex="1">
      <mxGeometry height="55" width="55" x="170" y="180" as="geometry" />
    </mxCell>
    <mxCell id="vpc-endpoint" parent="regional-services" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.endpoints;" value="VPC Endpoints (S3, DynamoDB)" vertex="1">
      <mxGeometry height="55" width="55" x="290" y="180" as="geometry" />
    </mxCell>
    <mxCell id="workflow" parent="regional-services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;align=left;spacingLeft=10;" value="Workflow: 1.User-ALB-Controller 2.Controller-DynamoDB 3.Controller-SQS 4.Worker-SQS 5.Worker-Docker 6.Worker-Redis 7.Controller-Redis 8.Response" vertex="1">
      <mxGeometry height="120" width="170" x="115" y="320" as="geometry" />
    </mxCell>
    <mxCell id="igw" parent="region" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#4D27AA;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.internet_gateway;" value="Internet Gateway" vertex="1">
      <mxGeometry height="50" width="50" x="430" y="10" as="geometry" />
    </mxCell>
    <mxCell id="conn-igw-alb" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;strokeWidth=2;" edge="1" source="igw" target="alb">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-controller-sqs" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#E7157B;strokeWidth=2;" edge="1" source="controller-ec2" target="sqs">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-sqs-worker" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#E7157B;strokeWidth=2;" edge="1" source="sqs" target="ec2-1">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-worker-s3" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3F8624;strokeWidth=2;" edge="1" source="ec2-1" target="s3-userdata">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-controller-dynamo" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3334B9;strokeWidth=1;dashed=1;" edge="1" source="controller-ec2" target="dynamodb">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="conn-cloudwatch-asg" parent="region" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#E7157B;strokeWidth=1;dashed=1;" edge="1" source="cloudwatch" target="asg">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="user" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#232F3E;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.user;" value="User (Client)" vertex="1">
      <mxGeometry height="60" width="60" x="480" y="-30" as="geometry" />
    </mxCell>
    <mxCell id="conn-user-igw" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333333;strokeWidth=2;" edge="1" source="user" target="igw">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
  </root>
</mxGraphModel>